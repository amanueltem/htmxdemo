<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Register</title>
    <link rel="stylesheet" th:href="@{/css/app.css}" />
    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
</head>
<body>

<div id="toast-container">
    <div th:replace="~{fragments/toast :: toast(null, null)}"></div>
</div>

<div class="container">
    <div class="card stack">
        <div class="text-center">
            <h2>Create account</h2>
            <p class="text-muted">Join the platform</p>
        </div>

        <form th:fragment="registrationForm"
              id="registrationForm"
              th:hx-post="@{/register}"
              hx-target="#registrationForm"
              hx-swap="outerHTML"
              th:object="${registerRequest}"
              class="stack">

            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

            <div class="form-group">
                <label>Full Name</label>
                <input name="fullName"
                       th:field="*{fullName}"
                       th:classappend="${#fields.hasErrors('fullName')} ? 'input-error'"
                       type="text" required />
                <small class="text-danger" th:if="${#fields.hasErrors('fullName')}" th:errors="*{fullName}"></small>
            </div>

            <div class="form-group">
                <label>Email</label>
                <input name="email"
                       th:field="*{email}"
                       th:classappend="${#fields.hasErrors('email')} ? 'input-error'"
                       type="email" required />
                <small class="text-danger" th:if="${#fields.hasErrors('email')}" th:errors="*{email}"></small>
            </div>

            <div class="form-group">
                <label>Phone</label>
                <input name="phoneNumber"
                       th:field="*{phoneNumber}"
                       th:classappend="${#fields.hasErrors('phoneNumber')} ? 'input-error'"
                       type="tel" />
                <small class="text-danger" th:if="${#fields.hasErrors('phoneNumber')}" th:errors="*{phoneNumber}"></small>
            </div>

            <div class="form-group">
                <label>Password</label>
                <input name="password"
                       th:field="*{password}"
                       th:classappend="${#fields.hasErrors('password')} ? 'input-error'"
                       type="password" required />
                <small class="text-danger" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></small>
            </div>

            <button class="btn btn-primary" type="submit">
                <span class="htmx-indicator spinner"></span>
                Register
            </button>
        </form>

        <div class="text-center">
            <a th:href="@{/login}" class="btn-link">Already have an account? Log in</a>
        </div>
    </div>
</div>

</body>
</html>