<div id="main-content-wrapper" th:fragment="expense-table-container">
    <div class="content-header">
        <h2>Personal Expense Dashboard</h2>
        <button
                class="btn btn-primary"
                hx-get="/personal-expenses/new"
                hx-target="#modals-here">
            + New Expense
        </button>
    </div>

    <div class="card-container">
        <table class="data-table">
            <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Amount</th>
                <th>Actions</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="expense : ${expenseList}">
                <td data-label="Date" th:text="${expense.getDate()}"></td>
                <td data-label="Time" th:text="${expense.getTimeSpan()}"></td>
                <td data-label="Amount" th:text="${expense.getAmount()}"></td>
                </td>
                <td data-label="Actions">
                    <div class="action-group" style="display: flex; gap: 5px;">

                        <button
                                class="btn btn-outline btn-sm"
                                th:hx-get="@{/personal-expenses/edit/{id}(id=${expense.getId()})}"
                                hx-target="#modals-here">Edit</button>

                        <button
                                class="btn btn-danger btn-sm"
                                th:hx-delete="@{/personal-expenses/{id}(id=${expense.getId()})}"
                                hx-target="#main-content-wrapper"
                                hx-swap="outerHTML"
                                hx-confirm="Confirm Deletion?">Delete</button>
                    </div>
                </td>
            </tr>
            </tbody>
        </table>

        <div class="pagination-bar" th:if="${totalPages > 1}">
            <button th:if="${hasPrev}" class="btn btn-outline btn-sm"
                    th:hx-get="@{/personal-expenses(page=${currentPage - 1})}"
                    hx-target="#main-content-wrapper" hx-swap="outerHTML">Previous</button>

            <span th:text="'Page ' + (${currentPage} + 1) + ' of ' + ${totalPages}"></span>

            <button th:if="${hasNext}" class="btn btn-outline btn-sm"
                    th:hx-get="@{/personal-expenses(page=${currentPage + 1})}"
                    hx-target="#main-content-wrapper" hx-swap="outerHTML">Next</button>
        </div>
    </div>
    <div id="modals-here"></div>
</div>